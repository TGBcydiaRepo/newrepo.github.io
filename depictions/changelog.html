 <!DOCTYPE html>
<html lang="en">
<head>
  <title>Changelog</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

  <script type="text/javascript" src="../js/jquery.querystring.js"></script>
  <script type="text/javascript" src="../js/ios_version_check.js"></script>
  <script type="text/javascript" src="../js/json-renderer-1.0.0.js"></script>
  <style>
  @media (max-width: 767px) {
    body{background:#efeff4!important;margin:0;padding:0;border:0;outline:0;box-sizing:border-box}
  }
  </style>
  <script type="text/javascript">
  var bundleid = $.QueryString['p'];
  var isCydia = (navigator.userAgent.search(/Cydia/) != -1);

  var content = [
    {
      'data-source' : '../repo-info.json',
      'elements'  : {
        '#repoFooterLinks': {'type':'custom', "source":"footerlinks",
          "render" : function(element,source) {
            if ($(source).size() == 0) {$('#externalLinksContainer').hide()}
            $.each(source, function(index,data) {
              var p = $("<li class='list-group-item'>");
              var a = $("<a class='btn btn-link'>")
                .attr("href",data.url)
                .attr("target",isCydia?"_blank":"self");
              if (data.icon) {
                $(a).append($("<span>").attr("class",data.icon));
              }
              $(a).append(' '+data.name);
              $(p).append(a)
              $(element).append(p);
            }); // each
          } // render
        } //#repoFooterLinks
      } //elements
    },
    {
      'data-source' : (bundleid+'/package-info.json'),
      'elements'  : {
        'title'           : {'type':'text','source':'packagename'},
        '#changeLogList'  : {'type':'custom','source':'changelog',
                            'listElement':"<li class='list-group-item'>",
                            'render' : function(element, source) {
                              if ((!source)) {
                                $('#packageInformation').hide();
                                $('#packageError').show();
                              }
                              $.each(source, function(key,value) {
                                var h5 = $("<h5>").text(key);
                                var ul = $("<ul class='list-group'>");
                                $(element).append(h5);
                                $.each(value, function(index, item){
                                  var li = $("<li class='list-group-item'>").text(item);
                                  $(ul).append(li);
                                });
                                $(element).append(ul);
                              });
                            }
        },
      }// elements
    }
  ];

  $( document ).ready(function() {
    var writer = new JSONRenderer({
      verbose : true,
      contentDefinition : content,
      onDataFileError : function(file) {
        $('#packageInformation').hide();
        $('#packageError').show();
      }
    });
    writer.render();
  }); // ready
  </script>
</head>
<body>
<br />

<div id="packageInformation">
  <div class="container" id="changeLogList">
  </div>
</div>
<div id="packageError" style="display:none">
  <div class="container">
    <div class="alert alert-danger">
    <strong>Oh snap!</strong> The package you are tying to view is not hosted on this repository.
    </div>
  </div>
</div>

<div id="contactInfo">
  <div class="container">
    <h5>CONTACT</h5>
    <ul class="list-group" id="repoFooterLinks">
    </ul>
  </div>
</div>

</body>
</html>
