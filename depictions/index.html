 <!DOCTYPE html>
<html lang="en">
<head>
  <title>/supermamon/</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery-2.2.3.min.js"></script>
  <script type="text/javascript" src="../js/jquery.querystring.js"></script>
  <script type="text/javascript" src="../js/ios_version_check.js"></script>
  <script type="text/javascript" src="../js/json-renderer-1.0.0.js"></script>
  <style>
  @media (max-width: 767px) {
    body{background:#efeff4!important;margin:0;padding:0;border:0;outline:0;box-sizing:border-box}
  }
  .jumbotron-bg {
    background: green
  }
  </style>
  <script type="text/javascript">
  var bundleid = $.QueryString['p'];
  var isCydia = (navigator.userAgent.search(/Cydia/) != -1);

  var content = [
    {
      'data-source' : '../repo-info.json',
      'elements'  : {
        '#repoFooterLinks': {'type':'custom', "source":"footerlinks",
          "render" : function(element,source) {
            if ($(source).size() == 0) {$('#contactInfo').hide()}
            $.each(source, function(index,data) {
              var p = $("<li class='list-group-item'>");
              var a = $("<a class='btn btn-link'>")
                .attr("href",data.url)
                .attr("target",isCydia?"_blank":"_self");
              if (data.icon) {
                $(a).append($("<span>").attr("class",data.icon));
              }
              $(a).append(' '+data.name);
              $(p).append(a)
              $(element).append(p);
            }); // each
          } // render
        } //#repoFooterLinks
      } //elements
    },
    {
      'data-source' : (bundleid+'/package-info.json'),
      'elements'  : {
        'title'           : {'type':'text','source':'packagename'},
        '.packagename'    : {'type':'text','source':'packagename'},
        '.author'         : {'type':'text','source':'author'},
        '#packageHeader'  : {'type':'custom','source':'packagename',
                              'render' : function(e,s) {
                                if (!isCydia) {$(e).show();}
                              }
                            },
        '#compatibilityCheck' : {'type':'custom','source':'compatibility',
                              'render' : function(el,comp) {
                                var res = ios_version_check(
                                  comp.firmware.miniOS,comp.firmware.maxiOS,
                                  comp.firmware.otherVersions,
                                  function(message,isBad) {
                                    $(el).html(message)
                                      .addClass( (isBad?'alert-danger':'alert-success'));
                                  }
                                ); //ios_version_check
                                if(res==0) {$(el).hide()}
                              } //render
                            },
        '#descriptionList': {'type':'list','source':'descriptions',
                            'listElement':"<li class='list-group-item'>",
                            'ifEmpty':function(e){$("#descriptionPanel").hide()},
                            'afterRender':function(e,data) {
                              var a = $('<A>')
                                .attr('href','screenshots.html?p='+bundleid)
                                .attr("target",isCydia?"_blank":"_self")
                                .text('Screenshots');
                              $(e).append($("<li class='list-group-item'>").append(a));
                            }
        },
        '#versionBadge'   : {'type':'text','source':'changelog','select':'firstKey'},
        '#changesList'    : {'type':'custom','source':'changelog','select':'firstValue',
                            "ifEmpty":function(e){$("#changesList").hide()},
                            "render" : function(element, source) {
                              $.each(source, function(index, item) {
                                  console.log("item="+item);
                                  var p = $("<li class='list-group-item'>");
                                  $(p).append(item);
                                  $(element).append(p);
                              });

                            },
                            'afterRender':function(e,data) {
                              var a = $('<A>')
                                .attr('href','changelog.html?p='+bundleid)
                                .attr("target",isCydia?"_blank":"_self")
                                .text('Full ChangeLog');
                              $(e).append($("<li class='list-group-item'>").append(a));
                            }
        },
        '#dependencyList' : {'type':'list','source':'dependencies',
                            'listElement':"<li class='list-group-item'>",
                            'ifEmpty':function(e){$("#dependenciesContainer").hide()}
        },
        '#externalLinksList' : {'type':'custom','source':'links',
                                "render" : function(element, source) {
                                  if ($(source).size() == 0 ) {$("#externalLinksContainer").hide()}
                                  $.each(source, function(index,data) {
                                    var p = $("<li class='list-group-item'>");
                                    var a = $("<a class='btn btn-link'>")
                                      .attr("href",data.url)
                                      .attr("target",isCydia?"_blank":"_self");
                                    $(a).html(data.name);
                                    $(p).append(a)
                                    $(element).append(p);
                                  }); // each
                                } //render
                              }//#externalLinksList
      }// elements
    }
  ];
  var writer = new JSONRenderer({
    verbose : false,
    contentDefinition : content,
    onDataFileError : function(file) {
      $('#packageInformation').hide();
      $('#packageError').show();
    }
  });
  writer.render();

  </script>
</head>
<body>
<br />

<div id="packageInformation">

  <div id="packageHeader" class="container" style="display:none">
    <div class="jumbotron">
      <h1 class="packagename"></h1>
      <p>by <span class="author"></span></p>
    </div>
  </div>

  <div class="container">
    <div id="compatibilityCheck" class="alert"></div>
  </div>

  <div class="container">
    <h5>DESCRIPTION</h5>
    <ul id="descriptionList" class="list-group"></ul>
  </div>

  <div class="container">
    <h5>IN THIS VERSION <span id="versionBadge" class="badge" /></h5>
    <ul id="changesList" class="list-group"></ul>
  </div>
  <div class="container" id="dependenciesContainer">
    <h5>DEPENDENCIES</h5>
    <ul id="dependencyList" class="list-group">
    </ul>
  </div>

  <div class="container" id="externalLinksContainer">
    <h5>LINKS</h5>
    <ul id="externalLinksList" class="list-group">
    </ul>
  </div>

</div>
<div id="packageError" style="display:none">
  <div class="container">
    <div class="alert alert-warning">
    <strong>Oh snap!</strong> The package information it not currently available.
    </div>
  </div>
</div>

<div id="contactInfo">
  <div class="container">
    <h5>CONTACT</h5>
    <ul class="list-group" id="repoFooterLinks">
    </ul>
  </div>
</div>
</body>
</html>
